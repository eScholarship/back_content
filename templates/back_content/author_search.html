{% extends "admin/core/base.html" %}
{% load static %}
{% load foundation %}
{% load press_url %}
{% load securitytags %}

{% block breadcrumbs %}
  {{ block.super }}
    <li><a href="{% url 'bc_index' %}">Back Content Plugin</a></li>
    <li><a href="{% url 'bc_article' article.pk %}">{{ article.safe_title }}</a></li>
    <li>Add Authors</li>
{% endblock %}

{% block title %}Search for Authors | {{ block.super }}{% endblock %}
{% block title-section %}
  Search for Authors
{% endblock %}

{% block body %}
  <div class="rummage-portal">
    <div>
      {% include "admin/elements/list_filters.html" %}
      {% if request.journal and user.is_staff %}
        <aside class="box">
          <p>
            Search for an author to add them to the article. Once all authors
            have been added,
            you can return to the main article page.
          </p>
          <p>
            <a href="{% url 'bc_article' article.pk %}#section-two" class="small success button">
              Return to Main Article Page
            </a>
          </p>
          <p>
              <strong>Note:</strong> This page lists all users with a role in
              <em>{{ request.journal.name }}</em>.
          </p>
      </aside>
      {% endif %}
    </div>
    <div class="box">
      <div class="title-area">
        <h2>{% trans "Users" %}</h2>
        <a
          href="{% url 'core_add_user' %}?return={{ request.get_full_path|urlencode }}"
          class="button">
          <span class="fa fa-user-plus"></span>
          Add New User
        </a>
      </div>
      <div>
        {% include "common/elements/sorting.html" with form_id=facet_form.id %}
      </div>
      {% for account in account_list %}
        <div class="callout">
          <h3>
            <strong>{{ account.full_name|default:"[No name]" }}</strong>
          </h3>
          <div class="rummage-result-details">
            <div class="flex portrait-column landscape-column gap-0-25">
              <div>{{ account.affiliation }}</div>
              <div>{{ account.email }}</div>
              <div>ID: <span>{{ account.pk }}</span></div>
              {% include 'admin/elements/user_details.html' %}
            </div>
            <div class="flex portrait-column gap-2">
              {% include 'back_content/elements/account_actions.html' %}
            </div>
          </div>
        </div>
      {% empty %}
        <p><strong>{% trans 'No accounts to display.' %}</strong></p>
      {% endfor %}
      {% include "common/elements/pagination.html" with form_id=facet_form.id %}
    </div>
  </div>
{% endblock body %}
